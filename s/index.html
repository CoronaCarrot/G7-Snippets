<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snippet</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/theme/dracula.min.css" />
    <link rel="stylesheet" href="../assets/css/app.css">
</head>

<body>
    <div class="playground-header">CODE PLAYGROUND</div>
    <div class="playground-container rr">
        <div class="playground-editor">
            <div><textarea class="code-editor" placeholder="javascript" id="scontain"></textarea></div>
        </div>
        <div id="consoleOutput" style="display: none; width: 100%;">
            <div class="code-header"
                style="width: calc(100% - 5px); height: 40px; display: flex; background-color: rgba(0,0,0,0.2); color: white; align-items: center; padding-left: 5px; font-size: 0.9em; font-family: monospace; font-weight: 600;">
                <p>CONSOLE</p>
                <button class="run-btn">RUN</button>
            </div>
            <pre style="margin: 0; width: 100%;"><code id="cout" style="height: calc(100% - 40px); margin: 0; padding: 20px;">
                
            </code></pre>
        </div>
    </div>
</body>
<footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/xml/xml.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/javascript/javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/css/css.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/mode/htmlmixed/htmlmixed.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/addon/edit/closebrackets.min.js"></script>
    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const src = urlParams.get('s') ?? "";
        const showConsole = ["1", "true"].includes(urlParams.get('showConsole') ?? "true")
        const lang = urlParams.get('lang');
        const highlight = ["1", "true"].includes(urlParams.get('highlight') ?? "true");
        console.log(src);

        const codeblock = document.getElementById("scontain");
        const consoleOutput = document.getElementById("consoleOutput");

        if (showConsole) consoleOutput.classList.add("show")
        codeblock.textContent = `${src}`

        const jsEditor = CodeMirror.fromTextArea(document.getElementById("scontain"), {
            mode: "javascript",
            lineNumbers: true,
            theme: "dracula",
            viewportMargin: Infinity,
            autoCloseBrackets: true,
            smartIndent: true,
            indentUnit: 4,
        });
    </script>
</footer>

</html>